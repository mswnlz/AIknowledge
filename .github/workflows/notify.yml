# .github/workflows/notify.yml
name: Notify Multiple Telegram Chats on GitHub Push

on:
  push:
    branches:
      - main

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send commit message to multiple Telegram chats
        env:
          BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
          CHAT_IDS: ${{ vars.TELEGRAM_CHAT_IDS }}
        run: |
          IFS=',' read -ra IDS <<< "$CHAT_IDS"
          for chat in "${IDS[@]}"; do
            curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
              -d chat_id="$chat" \
              --data-urlencode "text=ðŸ“¢ [${{ github.repository }}] æœ‰æ–°èµ„æºæäº¤ï¼
ðŸ“ æäº¤è¯´æ˜Ž: ${{ github.event.head_commit.message }}
ðŸ”— æŸ¥çœ‹: https://github.com/${{ github.repository }}/commit/${{ github.sha }}" \
              -d parse_mode="Markdown"
          done
